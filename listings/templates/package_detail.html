{% extends "base_webapp.html" %}
{% load static %}

{% block title %}D√©tails du Package - {{ package.reference }}{% endblock title %}

{% block page_title %}
    üì± D√©tail du Package
{% endblock page_title %}

{% block page_content %}
    <!-- DEBUT Stock & Opportunit√©s -->
    <div class="row mb-4">
        <!-- DEBUT  Stock -->
        <div class="col-12 col-md-6 col-lg-4 mb-4">
            <ul class="list-group font-monospace shadow-sm">
                <li class="list-group-item logo-blue fs-6">Envoi {{ package.reference }}</li>
                <li class="list-group-item fs-6">
                    <span>Nombre d'√©cran</span>
                    <span class="float-end">{{ num_brokenscreens|default:"N/A" }}</span>
                </li>
                <li class="list-group-item fs-6">
                    <span>Valeur totale estim√©e</span>
                    <span class="float-end">{{ total_value_brokenscreens|default:"N/A" }} ‚Ç¨</span>
                </li>
                {% if request.resolver_match.url_name == 'dashboard' %}
                    <li class="list-group-item text-end">
                        <a href="{% url 'stock_all' %}" class="btn btn-sm btn-outline-blue{% if items_count == 0 %} disabled{% endif %}">Voir en d√©tail</a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>
    
        <!-- laptop -->
        <div class="col-12 d-none d-md-block col-lg-10 mb-4">
            {% for broken_screen in brokenscreens %}
            <ul class="list-group mb-2 fs-6 font-monospace">
                <li class="list-group-item px-md-1 px-lg-2">
                    <div class="row">
                        <div class="col-md-1 text-start">
                            <span>{{ broken_screen.date_joined|date:'d/m' }}</span>
                        </div>
                        <div class="col-md-1 text-start">
                            <span class="badge rounded-pill font-monospace bg-success">{{ broken_screen.uniquereference }}</span>
                        </div>
                        <div class="col-md-4 text-start">
                            <span>{{ broken_screen.screenmodel.screenbrand.screenbrand|title }} {{ broken_screen.screenmodel.screenmodel }}</span>
                        </div>
                        <div class="col-md-3 text-start">
                            <span>{% if broken_screen.grade %}GRADE {{ broken_screen.grade }}{% else %}<span>üîé</span> ‚ùì{% endif %}</span>	
                        </div>
                        <div class="col-md-3 text-end">
                            <span>{% if broken_screen.price %}PRIX:{{ broken_screen.price}} ‚Ç¨ {% else %}<span>üí∞</span> ‚ùì{% endif %}</span>	
                        </div>
                    </div>
                </li>
            </ul>
            {% endfor %}
        </div>
    </div>
{% endblock page_content %}
